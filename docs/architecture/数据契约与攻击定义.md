# 架构设计：数据契约与攻击定义

## 1. 攻击配置 DTO (AttackConfig)
所有攻击行为（普攻、技能、反应）在发起时都必须携带一份完整的配置快照。该配置直接决定了物理层、元素层和数值层的表现。

### 1.1 核心参数映射
| 字段 | 对应逻辑模块 | 说明 |
| :--- | :--- | :--- |
| **元素类型 / 元素量** | 元素附着系统 | 决定反应类型与初始 GU 值 |
| **衰减序列 / 衰减标签** | ICD 控制器 | 决定是否触发元素附着计数器 |
| **AOE形状 / 偏移 / 索敌** | 空间碰撞系统 | 决定伤害影响的几何区域 |
| **Deployable?** | 实体管理系统 | 决定是否在场景中生成部署物 (如草原核) |
| **攻击标签 / 打击类型** | 伤害流水线 | 影响伤害加成判定 (如普通攻击、钝击等) |
| **远近类型** | 属性计算层 | 影响特定被动效果的加成判定 |

## 2. 数据流转路径
1. **角色逻辑层**：根据当前技能状态，从数据表中提取对应的 `AttackConfig`。
2. **伤害工厂 (DamageFactory)**：将 `AttackConfig` 与角色实时属性（攻击力、精通）结合，生成 `Damage` 对象。
3. **场景广播 (Broadcast)**：`Damage` 对象被提交给 `CombatSpace`，其携带的 AOE 参数用于筛选实体。
4. **实体反馈 (Feedback)**：被命中的实体解析 `AttackConfig` 中的附着标签，更新自身元素状态。

## 3. 动态属性扩展
除了静态数据，该契约还需支持动态计算：
- **选择方式**：决定在多个目标中优先攻击谁（如血量最低、距离最近）。
- **实时位置**：在广播阶段，根据实体当前坐标动态判定是否处于 AOE 几何体内。

---
*状态: 草案*
*关联 Issue: #26*