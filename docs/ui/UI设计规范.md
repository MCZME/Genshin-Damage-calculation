# UI 设计规范 (V2.1 - 工作台模式)

## 1. 设计哲学
*   **极简工具性 (Utility First)**：界面应保持高信息密度与清晰的视觉层级，避免冗余装饰，确保数据分析的专业性。
*   **游戏元素融合 (Game Accents)**：通过颜色、图标、微动效点缀《原神》元素，使工具具备项目属性，增强辨识度。
*   **空间组织 (Spatial Organization)**：采用“三栏式工作台”布局，降低用户的认知负荷。

## 2. 视觉规范 (Visual Tokens)

### 2.1 基础色调
*   **背景 (Base)**：Slate-900 (`#0F172A`) 为主背景，Slate-800 (`#1E293B`) 为卡片背景。
*   **边框 (Border)**：Slate-700 (`#334155`)，保持低对比度边界。
*   **文字 (Text)**：Slate-50 (`#F8FAFC`) 为主色，Slate-400 (`#94A3B8`) 为辅助描述色。

### 2.2 元素动态色系 (Elemental Accents)
界面交互色（如高亮边框、进度条、发光效果）应根据当前操作实体的元素属性动态切换：
*   **火 (Pyro)**: `#EF4444` (Red-500)
*   **水 (Hydro)**: `#3B82F6` (Blue-500)
*   **草 (Dendro)**: `#10B981` (Emerald-500)
*   **雷 (Electro)**: `#A855F7` (Purple-500)
*   **风 (Anemo)**: `#2DD4BF` (Teal-400)
*   **冰 (Cryo)**: `#0EA5E9` (Sky-500)
*   **岩 (Geo)**: `#F59E0B` (Amber-500)

## 3. 布局架构 (Layout Shell)

### 3.1 顶层：全局操作栏 (Header Bar)
*   **左侧**: `[保存配置]`、`[加载配置]` 等会话管理功能。
*   **右侧**: `[设置]`、应用状态指示。

### 3.2 左栏：导航与资源 (Sidebar - 280px)
*   **一级导航**: 配置、编排、分析（带图标）。
*   **实体库**: 当前队伍角色列表及预设环境选择。

### 3.3 中栏：配置中枢 (Main Config Hub - Flexible) —— **核心区域**
*   **非选中态**: 展示全队 4 名角色的简报卡片。
*   **选中态**: 
    *   **配置模式**: 显示当前实体的深度属性编辑器（等级、武器、圣遗物词条）。
    *   **分析模式**: 顶部为全宽 DPS 折线图，下方为事件帧回溯。

### 3.4 右栏：战场画布 (Combat Canvas - 360px)
*   **功能**: 负责实体的物理空间定义（坐标、朝向、受击判定）。
*   **交互**: 拖动实体图标修改物理属性，点击实体图标将中栏切换至其对应的编辑页。

### 3.5 底层：动作控制台 (Bottom Action Bar)
*   **右下角**: `[开始仿真]` (主动作按钮)。
*   **左下角**: `[重置]` 等危险操作。

## 4. 核心交互与状态流转

### 4.1 交互阶段定义 (User Interaction Stages)
虽然物理布局始终保持“三栏式工作台”，但根据用户的心智模型，界面重心会随阶段发生偏移：

| 阶段名称 | 核心任务 | 用户心智 | 界面状态 |
| :--- | :--- | :--- | :--- |
| **阶段一：战略筹备 (Strategy)** | 组建队伍、配置装备、设定参数 | "准备实验" | **编辑态** (Config Focused) |
| **阶段二：战术编排 (Tactics)** | 设计动作序列、排布技能顺序 | "设计流程" | **编辑态** (Action Focused) |
| **阶段三：战果复盘 (Review)** | 查看 DPS、分析反应、回溯数据 | "看实验报告" | **分析态** (Read-Only) |

### 4.2 仿真生命周期 (Simulation Lifecycle)
UI 必须严格区分以下两个状态，以确保数据的一致性：

*   **编辑模式 (Edit Mode - "The Lab")**
    *   **功能**：用户可以自由修改角色配置、武器、圣遗物及动作序列。
    *   **表现**：输入组件激活，中栏显示“开始仿真”按钮。此状态下无分析数据展示。
    *   **即时保存**：所有修改实时同步至内存草稿。

*   **分析模式 (Analysis Mode - "The Report")**
    *   **功能**：展示仿真结果、DPS 曲线、帧回溯数据。
    *   **表现**：**所有配置项进入只读状态**。中栏显示“修改配置”或“重新实验”按钮。
    *   **不可变性 (Immutability)**：仿真结果与配置是 1:1 强绑定的。若需修改任何参数，必须退回编辑模式并重新触发仿真。

### 4.3 阶段间的平滑过渡 (Transitions)
为了保证“流畅感 (Flow)”，阶段切换应通过视图状态机控制，辅以平滑动效：
1. **Strategy -> Tactics**: 点击“编辑动作序列”。*动效*: 中栏由角色编辑器平滑切换为流式动作编辑器。
2. **Tactics -> Review**: 点击“开始仿真”。*动效*: 全局轻微模糊（Loading），随后中栏载入图表层，右栏锁定为空间回溯。
3. **Review -> Edit**: 点击“回溯编辑”。*动效*: 分析视图层收起，露出底部的配置界面。

## 5. 反馈体系
*   **仿真中**：左栏下方显示微型进度条，禁用所有导航跳转。
*   **仿真完成**：右下角弹出 Toast 通知，若当前不在分析页，点击可快速跳转。
*   **数据过期提示**：在编辑模式下，若存在上次的残留结果，应在显著位置提示“当前配置已变动，结果可能不匹配”。

---
*版本: v1.0.0*
*日期: 2026-02-08*
