# UI 布局设计规范 V3.0 (Smart Responsive)

> **核心逻辑**: 基于 Flet `Row/Column` 的弹性盒模型，结合 `AnimatedContainer` 实现无缝响应。

## 1. 全局架构 (AppLayout)

采用 **"Header - Body - Footer"** 的经典三段式结构，但赋予其高度的动态性。

```
[ Header (Fixed 64px, Glass) ]
------------------------------
[                            ]
[  Left |  Middle  | Right   ] <-- Body (Expand, Stretch)
[  Pane |   Pane   | Pane    ]
[       |          |         ]
------------------------------
[ Footer (Fixed 64px, Solid) ]
```

*   **垂直对齐**: Body 区域使用 `vertical_alignment=CrossAxisAlignment.STRETCH`，强制三栏高度始终填满屏幕剩余空间。
*   **底栏**: 不再悬浮，而是占据底部物理空间，避免遮挡内容。

## 2. 智能侧边栏 (Smart Sidebar)

左侧栏具备 **"展开 (Expanded)"** 和 **"极简 (Compact)"** 两种形态，根据窗口宽度自动切换。

*   **断点 (Breakpoint)**: `1200px`。
*   **Expanded Mode (>= 1200px)**:
    *   宽度: `300px`
    *   内容: 完整显示角色头像、名字、武器、元素信息。
    *   内边距: `24px`
*   **Compact Mode (< 1200px)**:
    *   宽度: `80px`
    *   内容: 垂直堆叠的圆形图标，隐藏次要信息。
    *   内边距: `8px`
*   **过渡动画**: `400ms Decelerate` 曲线，确保切换丝滑。

## 3. 面板分工

### 3.1 左栏：资源选择器 / 动作库
*   **战略模式**: 编队与目标管理。
*   **战术模式**: 基于角色的动作选择器。采用“首字强化”风格按钮。

### 3.2 中栏：详情编辑器 / 指令时间轴
*   **战略模式**: 属性与装备精调。
*   **战术模式**: 自动换行的“输出手法”流式块序列。支持 Drag & Drop 排序。

### 3.3 右栏：战场可视化 / 指令检视器
*   **战略模式**: 环境卡片与网格战场图。
*   **战术模式**: 元数据驱动的动作参数编辑器。

## 4. 响应式策略
1.  **宽度优先**: 优先压缩/扩展中栏 (Middle Pane)。
2.  **折叠策略**: 空间不足时，优先折叠左栏至 80px，保留中栏的可编辑性。
3.  **滚动支持**: 所有面板内部均支持 `scroll=ft.ScrollMode.AUTO`，防止纵向溢出。