# 阶段一：战略筹备 (Strategic Phase) - 完备性报告

> **目标**: 完成战斗仿真的所有前置静态配置，包括队伍编成、属性精调、怪物设定及环境模拟。

## 1. 核心架构与交互逻辑
采用 **“目录-工作-摘要”** 的三栏分工模式：
*   **左栏 (Selector Pane)**: 动态资源管理器。负责添加/删除角色与目标，作为全局导航中枢。
*   **中栏 (Editor Pane)**: 上下文敏感工作区。根据左栏选中项，实时切换“选人网格”、“角色编辑器”、“怪物编辑器”或“环境编辑器”。
*   **右栏 (Visual Pane)**: 环境摘要与战场可视化。提供物理坐标的实时像素级映射。

## 2. 已实现关键特性

### 2.1 智能数据绑定 (Data Binding)
*   **双向同步**: 中栏所有输入框 (TextField) 均实现失焦自动写回 (on_blur sync)，确保数据实时性。
*   **焦点保护**: 优化刷新策略，输入过程中不触发控件重建，彻底解决输入中断问题。

### 2.2 仿真合法性过滤 (Registry Filtering)
*   **实现态感知**: 界面自动读取 `core.registry`。
*   **视觉分级**: 已编写 Python 逻辑类的角色/武器显示彩色；未实现的条目显示为灰色锁定状态，并禁用交互。
*   **规则约束**: 圣遗物主词条根据部位自动锁定合法范围（如花固定生命、杯子固定元素加成）。

### 2.3 原子化持久化 (Atomic Persistence)
*   **全量配置**: 支持整场仿真环境的保存与加载 (`data/configs/`)。
*   **原子模板**:
    *   **角色预设**: 保存单人所有属性、武器及圣遗物。
    *   **圣遗物套装**: 独立导出/导入 5 件套配置，支持跨角色复用。

### 2.4 全自动响应式布局 (Smart Responsive V2)
*   **多级断点**:
    *   `> 1400px`: 全功能模式。
    *   `1000px - 1400px`: 侧边栏折叠模式（左栏 80px）。
    *   `< 1000px`: 极致生产力模式（右栏同步折叠至 60px），最大化中栏编辑区。

## 3. 下一阶段展望：战术编排 (Tactical Phase)
*   实现基于 **`ReorderableListView`** 的动作时间轴。
*   支持动作参数的深度检视（如：技能是否命中、是否长按、是否消耗能量）。
*   打通“战略配置”到“战术执行”的数据链路。

---
*版本: v3.0*
*更新日期: 2026-02-10*